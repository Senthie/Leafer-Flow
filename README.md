# Leafer-Flow

ä¸€ä¸ªåŸºäºLeaferJSæ„å»ºçš„é«˜æ€§èƒ½å·¥ä½œæµå¯è§†åŒ–å·¥å…·åº“ã€‚

## ç‰¹æ€§

- ğŸš€ åŸºäºLeaferJSçš„é«˜æ€§èƒ½æ¸²æŸ“
- ğŸ“¦ TypeScriptæ”¯æŒï¼Œå®Œæ•´çš„ç±»å‹å®šä¹‰
- ğŸ¯ æ¨¡å—åŒ–æ¶æ„ï¼Œæ˜“äºæ‰©å±•
- ğŸ”§ å®Œæ•´çš„èŠ‚ç‚¹å’Œè¿æ¥ç®¡ç†
- ğŸ¨ å¯è‡ªå®šä¹‰çš„èŠ‚ç‚¹å’Œè¿æ¥æ ·å¼
- ğŸ“± æ”¯æŒæ‹–æ‹½ã€ç¼©æ”¾ã€å¹³ç§»ç­‰äº¤äº’
- ğŸ’¾ æ•°æ®åºåˆ—åŒ–å’Œååºåˆ—åŒ–
- ğŸ§ª åŸºäºå±æ€§çš„æµ‹è¯•ä¿è¯ä»£ç è´¨é‡
- âš¡ æ€§èƒ½ä¼˜åŒ–ï¼Œæ”¯æŒå¤§è§„æ¨¡å·¥ä½œæµ
- ğŸ”„ æ’¤é”€/é‡åšåŠŸèƒ½
- ğŸ›ï¸ ä¸°å¯Œçš„äº‹ä»¶ç³»ç»Ÿ

## é‡è¦ï¼šåŒ…ç®¡ç†å™¨è¦æ±‚

**âš ï¸ å¼ºåˆ¶è¦æ±‚**: æœ¬é¡¹ç›®å¿…é¡»ä½¿ç”¨ [pnpm](https://pnpm.io/) ä½œä¸ºåŒ…ç®¡ç†å™¨ã€‚ä½¿ç”¨å…¶ä»–åŒ…ç®¡ç†å™¨ï¼ˆnpmã€yarnï¼‰å¯èƒ½å¯¼è‡´ä¾èµ–é—®é¢˜å’Œæ€§èƒ½ä¸‹é™ã€‚

### å®‰è£… pnpm

å¦‚æœæ‚¨è¿˜æ²¡æœ‰å®‰è£… pnpmï¼Œè¯·é€‰æ‹©ä»¥ä¸‹æ–¹å¼ä¹‹ä¸€ï¼š

```bash
# æ–¹å¼ 1: ä½¿ç”¨ npm å®‰è£…
npm install -g pnpm

# æ–¹å¼ 2: ä½¿ç”¨ curl (Linux/macOS)
curl -fsSL https://get.pnpm.io/install.sh | sh -

# æ–¹å¼ 3: ä½¿ç”¨ PowerShell (Windows)
iwr https://get.pnpm.io/install.ps1 -useb | iex

# æ–¹å¼ 4: ä½¿ç”¨ Homebrew (macOS)
brew install pnpm
```

### éªŒè¯å®‰è£…

```bash
pnpm --version
# åº”è¯¥æ˜¾ç¤ºç‰ˆæœ¬å·ï¼Œå¦‚: 8.10.0
```

### ä¸ºä»€ä¹ˆå¿…é¡»ä½¿ç”¨ pnpmï¼Ÿ

1. **æ€§èƒ½ä¼˜åŠ¿**: pnpm æ¯” npm å¿« 2-3 å€ï¼Œæ¯” yarn å¿« 1.5-2 å€
2. **ç£ç›˜ç©ºé—´**: é€šè¿‡ç¡¬é“¾æ¥å’Œç¬¦å·é“¾æ¥èŠ‚çœé«˜è¾¾ 50% çš„ç£ç›˜ç©ºé—´
3. **ä¾èµ–ç®¡ç†**: æ›´ä¸¥æ ¼çš„ä¾èµ–ç®¡ç†ï¼Œé¿å…å¹½çµä¾èµ–é—®é¢˜
4. **é¡¹ç›®é…ç½®**: æœ¬é¡¹ç›®çš„æ„å»ºè„šæœ¬å’Œé…ç½®ä¸“é—¨ä¸º pnpm ä¼˜åŒ–

## å®‰è£…

```bash
# å®‰è£… Leafer-Flow
pnpm add leafer-flow

# æˆ–è€…å®‰è£…å¼€å‘ç‰ˆæœ¬
pnpm add leafer-flow@latest
```

## å¿«é€Ÿå¼€å§‹

```typescript
import { FlowEditor } from 'leafer-flow';

// åˆ›å»ºç¼–è¾‘å™¨å®ä¾‹
const container = document.getElementById('flow-container');
const editor = new FlowEditor(container, {
  width: 800,
  height: 600,
  background: '#f5f5f5',
  grid: true
});

// æ·»åŠ èŠ‚ç‚¹
const node = editor.addNode({
  id: 'node-1',
  type: 'default',
  position: { x: 100, y: 100 },
  data: { label: 'å¼€å§‹èŠ‚ç‚¹' },
  ports: [
    { id: 'output', type: 'output', position: 'right' }
  ]
});

// æ·»åŠ è¿æ¥
const edge = editor.addEdge({
  id: 'edge-1',
  source: 'node-1',
  sourcePort: 'output',
  target: 'node-2',
  targetPort: 'input'
});
```

## å¼€å‘

### ç¯å¢ƒè®¾ç½®

```bash
# å…‹éš†é¡¹ç›®
git clone <repository-url>
cd leafer-flow

# å®‰è£…ä¾èµ– (å¿…é¡»ä½¿ç”¨ pnpm)
pnpm install

# éªŒè¯å®‰è£…
pnpm run build
pnpm run test
```

### å¼€å‘å‘½ä»¤

```bash
# å¼€å‘æ¨¡å¼ (ç›‘å¬æ–‡ä»¶å˜åŒ–)
pnpm dev

# è¿è¡Œæµ‹è¯•
pnpm test

# ç›‘å¬æ¨¡å¼è¿è¡Œæµ‹è¯•
pnpm test:watch

# è¿è¡Œå±æ€§æµ‹è¯•
pnpm test:properties

# æ„å»ºé¡¹ç›®
pnpm build

# ä»£ç æ£€æŸ¥
pnpm lint

# è‡ªåŠ¨ä¿®å¤ä»£ç é£æ ¼
pnpm lint:fix

# æµ‹è¯•è¦†ç›–ç‡
pnpm test:coverage

# æ¸…ç†æ„å»ºæ–‡ä»¶
pnpm clean
```

### é¡¹ç›®è„šæœ¬è¯´æ˜

- `pnpm dev`: å¯åŠ¨ TypeScript ç¼–è¯‘å™¨çš„ç›‘å¬æ¨¡å¼
- `pnpm test`: è¿è¡Œæ‰€æœ‰æµ‹è¯•ï¼ˆå•å…ƒæµ‹è¯• + å±æ€§æµ‹è¯•ï¼‰
- `pnpm test:properties`: ä¸“é—¨è¿è¡Œå±æ€§æµ‹è¯•
- `pnpm build`: ç¼–è¯‘ TypeScript ä»£ç åˆ° dist ç›®å½•
- `pnpm lint`: æ£€æŸ¥ä»£ç é£æ ¼å’Œæ½œåœ¨é—®é¢˜

## æ–‡æ¡£

### å®Œæ•´æ–‡æ¡£

- ğŸ“– [ä½¿ç”¨æŒ‡å—](./docs/USAGE_GUIDE.md) - è¯¦ç»†çš„ä½¿ç”¨æ•™ç¨‹å’Œæœ€ä½³å®è·µ
- ğŸ“š [API æ–‡æ¡£](./docs/API.md) - å®Œæ•´çš„ API å‚è€ƒ
- âš¡ [æ€§èƒ½ä¼˜åŒ–æŒ‡å—](./docs/PERFORMANCE.md) - æ€§èƒ½ä¼˜åŒ–æŠ€å·§å’Œå»ºè®®

### ç¤ºä¾‹ä»£ç 

- ğŸš€ [åŸºç¡€ä½¿ç”¨ç¤ºä¾‹](./examples/basic-usage.ts) - å¿«é€Ÿå…¥é—¨ç¤ºä¾‹
- ğŸ¯ [å¸¸è§åœºæ™¯ç¤ºä¾‹](./examples/common-scenarios.ts) - å®é™…åº”ç”¨åœºæ™¯
- ğŸ”§ [é«˜çº§åŠŸèƒ½æ¼”ç¤º](./examples/advanced-features-demo.ts) - é«˜çº§ç‰¹æ€§å±•ç¤º

## æ¶æ„

Leafer-Flowé‡‡ç”¨æ¨¡å—åŒ–æ¶æ„è®¾è®¡ï¼š

### æ ¸å¿ƒç»„ä»¶

- **FlowEditor**: ä¸»ç¼–è¾‘å™¨ç±»ï¼Œåè°ƒæ‰€æœ‰å­ç³»ç»Ÿ
- **NodeManager**: èŠ‚ç‚¹ç®¡ç†å™¨ï¼Œå¤„ç†èŠ‚ç‚¹çš„å¢åˆ æ”¹æŸ¥
- **EdgeManager**: è¿æ¥ç®¡ç†å™¨ï¼Œå¤„ç†è¿æ¥çº¿çš„ç®¡ç†
- **InteractionSystem**: äº¤äº’ç³»ç»Ÿï¼Œå¤„ç†ç”¨æˆ·äº¤äº’ï¼ˆæ‹–æ‹½ã€é€‰æ‹©ç­‰ï¼‰
- **EventSystem**: äº‹ä»¶ç³»ç»Ÿï¼Œæä¾›å®Œæ•´çš„äº‹ä»¶æœºåˆ¶
- **ViewportManager**: è§†å›¾ç®¡ç†å™¨ï¼Œå¤„ç†ç¼©æ”¾å’Œå¹³ç§»
- **SerializationManager**: åºåˆ—åŒ–ç®¡ç†å™¨ï¼Œå¤„ç†æ•°æ®çš„ä¿å­˜å’ŒåŠ è½½

### æ¸²æŸ“ç»„ä»¶

- **NodeRenderer**: èŠ‚ç‚¹æ¸²æŸ“å™¨ï¼Œæ”¯æŒè‡ªå®šä¹‰èŠ‚ç‚¹æ ·å¼
- **EdgeRenderer**: è¿æ¥çº¿æ¸²æŸ“å™¨ï¼Œæ”¯æŒå¤šç§è¿æ¥çº¿ç±»å‹
- **PerformanceSystem**: æ€§èƒ½ç³»ç»Ÿï¼Œä¼˜åŒ–å¤§è§„æ¨¡å·¥ä½œæµæ¸²æŸ“
- **HistorySystem**: å†å²ç³»ç»Ÿï¼Œæä¾›æ’¤é”€/é‡åšåŠŸèƒ½

## æ€§èƒ½ç‰¹æ€§

- ğŸ¯ **è™šæ‹ŸåŒ–æ¸²æŸ“**: åªæ¸²æŸ“å¯è§åŒºåŸŸçš„å…ƒç´ 
- ğŸ“Š **ç»†èŠ‚å±‚æ¬¡ (LOD)**: æ ¹æ®ç¼©æ”¾çº§åˆ«è°ƒæ•´æ¸²æŸ“ç»†èŠ‚
- ğŸ”„ **æ‰¹é‡æ“ä½œ**: é«˜æ•ˆå¤„ç†å¤§é‡èŠ‚ç‚¹çš„åˆ›å»ºå’Œæ›´æ–°
- ğŸ’¾ **å¯¹è±¡æ± åŒ–**: å‡å°‘åƒåœ¾å›æ”¶å‹åŠ›
- âš¡ **æ™ºèƒ½é‡ç»˜**: åªé‡ç»˜å˜åŒ–çš„åŒºåŸŸ
- ğŸ“ˆ **æ€§èƒ½ç›‘æ§**: å®æ—¶ç›‘æ§æ¸²æŸ“æ€§èƒ½å’Œå†…å­˜ä½¿ç”¨

## è´¡çŒ®æŒ‡å—

### å¼€å‘ç¯å¢ƒè¦æ±‚

- Node.js >= 16.0.0
- pnpm >= 8.0.0 (å¿…é¡»)
- TypeScript >= 5.0.0

### è´¡çŒ®æµç¨‹

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯: `git checkout -b feature/amazing-feature`
3. ä½¿ç”¨ pnpm å®‰è£…ä¾èµ–: `pnpm install`
4. è¿›è¡Œå¼€å‘å¹¶ç¡®ä¿æµ‹è¯•é€šè¿‡: `pnpm test`
5. æäº¤æ›´æ”¹: `git commit -m 'Add amazing feature'`
6. æ¨é€åˆ†æ”¯: `git push origin feature/amazing-feature`
7. åˆ›å»º Pull Request

### ä»£ç è§„èŒƒ

- ä½¿ç”¨ TypeScript è¿›è¡Œå¼€å‘
- éµå¾ª ESLint é…ç½®çš„ä»£ç é£æ ¼
- ä¸ºæ–°åŠŸèƒ½ç¼–å†™å•å…ƒæµ‹è¯•å’Œå±æ€§æµ‹è¯•
- æ›´æ–°ç›¸å…³æ–‡æ¡£

## è®¸å¯è¯

MIT License - è¯¦è§ [LICENSE](./LICENSE) æ–‡ä»¶

## æ”¯æŒ

å¦‚æœæ‚¨åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜æˆ–æœ‰æ”¹è¿›å»ºè®®ï¼š

- ğŸ“ [æäº¤ Issue](../../issues)
- ğŸ’¬ [å‚ä¸è®¨è®º](../../discussions)
- ğŸ“§ è”ç³»ç»´æŠ¤è€…

---

**è®°ä½**: å§‹ç»ˆä½¿ç”¨ pnpm ä½œä¸ºåŒ…ç®¡ç†å™¨ä»¥è·å¾—æœ€ä½³çš„å¼€å‘ä½“éªŒå’Œæ€§èƒ½ï¼
